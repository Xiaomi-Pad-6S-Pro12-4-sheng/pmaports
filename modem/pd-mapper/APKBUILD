# Maintainer: Luca Weiss <luca@lucaweiss.eu>
pkgname=pd-mapper
pkgver=1.0
pkgrel=0
pkgdesc="Qualcomm Protection domain mapper"
url="https://github.com/linux-msm/pd-mapper"
arch="all"
license="BSD-3-Clause"
makedepends="qrtr-dev"
source="https://github.com/linux-msm/pd-mapper/archive/v$pkgver/pd-mapper-v$pkgver.tar.gz
	pd-mapper.initd
	"
subpackages="$pkgname-doc $pkgname-openrc"
options="!check" # No test suite

build() {
	make prefix="/usr"
}

package() {
	make prefix="/usr" DESTDIR="$pkgdir" install
	rm -r "$pkgdir"/usr/lib/systemd

	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
	install -Dm755 "$srcdir"/pd-mapper.initd "$pkgdir"/etc/init.d/pd-mapper
}

sha512sums="
3118feb3ba972327af38d7753b8fb5f3b43ba7a2c88d550670cb7426237e29400e984042da33d115d638772a83307c790d5f9d76f081c85d815770861c66581b  pd-mapper-v1.0.tar.gz
67aaec50737782c68e2e639b9dfb5b4803850b50c4260983975ac466b4b59d775e57542eccac1af5fffddeed8403f7b991194544c96b7c4aba7b0c1a666eb262  pd-mapper.initd
"
